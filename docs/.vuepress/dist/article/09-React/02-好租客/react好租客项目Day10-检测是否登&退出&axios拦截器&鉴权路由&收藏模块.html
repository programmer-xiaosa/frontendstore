<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>我的页面 | 程序猿小萨</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/my-blog/img/favicon.ico">
    <link rel="icon" href="/my-blog/logo.jpg">
    <link rel="stylesheet" href="/my-blog/css/style.css">
    <link rel="stylesheet" href="/my-blog/styles/style.css">
    <meta name="description" content="学的不仅是技术，更是梦想">
    
    <link rel="preload" href="/my-blog/assets/css/0.styles.ecc0b0a4.css" as="style"><link rel="preload" href="/my-blog/assets/js/app.7c428a71.js" as="script"><link rel="preload" href="/my-blog/assets/js/3.bb9bf636.js" as="script"><link rel="preload" href="/my-blog/assets/js/123.e95c7eb0.js" as="script"><link rel="prefetch" href="/my-blog/assets/js/10.4db2ee45.js"><link rel="prefetch" href="/my-blog/assets/js/100.2fffb30e.js"><link rel="prefetch" href="/my-blog/assets/js/101.07c4c005.js"><link rel="prefetch" href="/my-blog/assets/js/102.a4f5f2ab.js"><link rel="prefetch" href="/my-blog/assets/js/103.04dc7d20.js"><link rel="prefetch" href="/my-blog/assets/js/104.db19c071.js"><link rel="prefetch" href="/my-blog/assets/js/105.c5076a7d.js"><link rel="prefetch" href="/my-blog/assets/js/106.016b2a8e.js"><link rel="prefetch" href="/my-blog/assets/js/107.69361372.js"><link rel="prefetch" href="/my-blog/assets/js/108.6b873487.js"><link rel="prefetch" href="/my-blog/assets/js/109.dcef6f03.js"><link rel="prefetch" href="/my-blog/assets/js/11.8e0ecf79.js"><link rel="prefetch" href="/my-blog/assets/js/110.c075c081.js"><link rel="prefetch" href="/my-blog/assets/js/111.5ceacc7b.js"><link rel="prefetch" href="/my-blog/assets/js/112.806029be.js"><link rel="prefetch" href="/my-blog/assets/js/113.09282625.js"><link rel="prefetch" href="/my-blog/assets/js/114.cc121a77.js"><link rel="prefetch" href="/my-blog/assets/js/115.b65535b0.js"><link rel="prefetch" href="/my-blog/assets/js/116.1c60e297.js"><link rel="prefetch" href="/my-blog/assets/js/117.76c88f9c.js"><link rel="prefetch" href="/my-blog/assets/js/118.489369fd.js"><link rel="prefetch" href="/my-blog/assets/js/119.57ce1dd4.js"><link rel="prefetch" href="/my-blog/assets/js/12.59bafcb5.js"><link rel="prefetch" href="/my-blog/assets/js/120.eb88579c.js"><link rel="prefetch" href="/my-blog/assets/js/121.df569222.js"><link rel="prefetch" href="/my-blog/assets/js/122.8fe90413.js"><link rel="prefetch" href="/my-blog/assets/js/124.142e1289.js"><link rel="prefetch" href="/my-blog/assets/js/125.ec039450.js"><link rel="prefetch" href="/my-blog/assets/js/126.ebbdc164.js"><link rel="prefetch" href="/my-blog/assets/js/127.9668af23.js"><link rel="prefetch" href="/my-blog/assets/js/128.c84d1e01.js"><link rel="prefetch" href="/my-blog/assets/js/129.1ccbf3a8.js"><link rel="prefetch" href="/my-blog/assets/js/13.51370618.js"><link rel="prefetch" href="/my-blog/assets/js/130.d37460df.js"><link rel="prefetch" href="/my-blog/assets/js/131.252accbf.js"><link rel="prefetch" href="/my-blog/assets/js/132.f8871372.js"><link rel="prefetch" href="/my-blog/assets/js/133.f076c159.js"><link rel="prefetch" href="/my-blog/assets/js/134.938aafc4.js"><link rel="prefetch" href="/my-blog/assets/js/135.98d31db1.js"><link rel="prefetch" href="/my-blog/assets/js/136.436cd1b2.js"><link rel="prefetch" href="/my-blog/assets/js/137.bcf9e8e3.js"><link rel="prefetch" href="/my-blog/assets/js/138.931f7d6b.js"><link rel="prefetch" href="/my-blog/assets/js/139.60f9454a.js"><link rel="prefetch" href="/my-blog/assets/js/14.4932591f.js"><link rel="prefetch" href="/my-blog/assets/js/140.0598b3ce.js"><link rel="prefetch" href="/my-blog/assets/js/141.24477031.js"><link rel="prefetch" href="/my-blog/assets/js/142.10be2079.js"><link rel="prefetch" href="/my-blog/assets/js/143.23926a00.js"><link rel="prefetch" href="/my-blog/assets/js/144.cffffaeb.js"><link rel="prefetch" href="/my-blog/assets/js/145.4fe5c915.js"><link rel="prefetch" href="/my-blog/assets/js/146.71845fac.js"><link rel="prefetch" href="/my-blog/assets/js/147.40c724c6.js"><link rel="prefetch" href="/my-blog/assets/js/148.d839c855.js"><link rel="prefetch" href="/my-blog/assets/js/149.f47967d5.js"><link rel="prefetch" href="/my-blog/assets/js/15.8ef5c91f.js"><link rel="prefetch" href="/my-blog/assets/js/150.a890b37c.js"><link rel="prefetch" href="/my-blog/assets/js/151.9db60f3a.js"><link rel="prefetch" href="/my-blog/assets/js/152.3f907e4b.js"><link rel="prefetch" href="/my-blog/assets/js/153.4433e611.js"><link rel="prefetch" href="/my-blog/assets/js/154.13ffa368.js"><link rel="prefetch" href="/my-blog/assets/js/155.192cb54f.js"><link rel="prefetch" href="/my-blog/assets/js/156.ba129467.js"><link rel="prefetch" href="/my-blog/assets/js/157.35b396b5.js"><link rel="prefetch" href="/my-blog/assets/js/158.942acf61.js"><link rel="prefetch" href="/my-blog/assets/js/159.7b355eba.js"><link rel="prefetch" href="/my-blog/assets/js/16.17b3c170.js"><link rel="prefetch" href="/my-blog/assets/js/160.eda036e7.js"><link rel="prefetch" href="/my-blog/assets/js/161.2f2ec8cb.js"><link rel="prefetch" href="/my-blog/assets/js/162.dd99b22d.js"><link rel="prefetch" href="/my-blog/assets/js/163.55e1aec2.js"><link rel="prefetch" href="/my-blog/assets/js/164.29b45d76.js"><link rel="prefetch" href="/my-blog/assets/js/165.d47db04a.js"><link rel="prefetch" href="/my-blog/assets/js/166.eff613ae.js"><link rel="prefetch" href="/my-blog/assets/js/167.a9f08670.js"><link rel="prefetch" href="/my-blog/assets/js/168.f458a27f.js"><link rel="prefetch" href="/my-blog/assets/js/169.ec40acdd.js"><link rel="prefetch" href="/my-blog/assets/js/17.24ff5731.js"><link rel="prefetch" href="/my-blog/assets/js/170.9e988a8d.js"><link rel="prefetch" href="/my-blog/assets/js/171.59329201.js"><link rel="prefetch" href="/my-blog/assets/js/172.8e6df937.js"><link rel="prefetch" href="/my-blog/assets/js/173.a6f00b7a.js"><link rel="prefetch" href="/my-blog/assets/js/174.1dd5efe8.js"><link rel="prefetch" href="/my-blog/assets/js/175.90da8e24.js"><link rel="prefetch" href="/my-blog/assets/js/176.141d880d.js"><link rel="prefetch" href="/my-blog/assets/js/177.079b5b05.js"><link rel="prefetch" href="/my-blog/assets/js/178.ebd59b63.js"><link rel="prefetch" href="/my-blog/assets/js/179.b335165a.js"><link rel="prefetch" href="/my-blog/assets/js/18.b34227e5.js"><link rel="prefetch" href="/my-blog/assets/js/180.67d9ab46.js"><link rel="prefetch" href="/my-blog/assets/js/181.9b301e35.js"><link rel="prefetch" href="/my-blog/assets/js/182.0e102a2d.js"><link rel="prefetch" href="/my-blog/assets/js/183.43459312.js"><link rel="prefetch" href="/my-blog/assets/js/184.fda40b25.js"><link rel="prefetch" href="/my-blog/assets/js/185.2fdcdc84.js"><link rel="prefetch" href="/my-blog/assets/js/186.3f31eaf2.js"><link rel="prefetch" href="/my-blog/assets/js/187.281d1436.js"><link rel="prefetch" href="/my-blog/assets/js/188.d5224015.js"><link rel="prefetch" href="/my-blog/assets/js/189.0972390f.js"><link rel="prefetch" href="/my-blog/assets/js/19.ec4eb9de.js"><link rel="prefetch" href="/my-blog/assets/js/190.ca92c76c.js"><link rel="prefetch" href="/my-blog/assets/js/191.1f7905ed.js"><link rel="prefetch" href="/my-blog/assets/js/192.b692c548.js"><link rel="prefetch" href="/my-blog/assets/js/193.e6770e7f.js"><link rel="prefetch" href="/my-blog/assets/js/194.0414cd71.js"><link rel="prefetch" href="/my-blog/assets/js/195.332324a7.js"><link rel="prefetch" href="/my-blog/assets/js/196.253cd62c.js"><link rel="prefetch" href="/my-blog/assets/js/197.50d8d323.js"><link rel="prefetch" href="/my-blog/assets/js/198.da2be3bf.js"><link rel="prefetch" href="/my-blog/assets/js/199.37e49aeb.js"><link rel="prefetch" href="/my-blog/assets/js/2.bb3c2c47.js"><link rel="prefetch" href="/my-blog/assets/js/20.92a01666.js"><link rel="prefetch" href="/my-blog/assets/js/21.c74d5dde.js"><link rel="prefetch" href="/my-blog/assets/js/22.ce0433c3.js"><link rel="prefetch" href="/my-blog/assets/js/23.69439d49.js"><link rel="prefetch" href="/my-blog/assets/js/24.b057c9e5.js"><link rel="prefetch" href="/my-blog/assets/js/25.918e8d83.js"><link rel="prefetch" href="/my-blog/assets/js/26.fe13e2d3.js"><link rel="prefetch" href="/my-blog/assets/js/27.c3ca8fe3.js"><link rel="prefetch" href="/my-blog/assets/js/28.30a417d8.js"><link rel="prefetch" href="/my-blog/assets/js/29.e375d353.js"><link rel="prefetch" href="/my-blog/assets/js/30.3069ab70.js"><link rel="prefetch" href="/my-blog/assets/js/31.647b7c22.js"><link rel="prefetch" href="/my-blog/assets/js/32.47c12ff3.js"><link rel="prefetch" href="/my-blog/assets/js/33.5700311a.js"><link rel="prefetch" href="/my-blog/assets/js/34.39f86e33.js"><link rel="prefetch" href="/my-blog/assets/js/35.0317ca56.js"><link rel="prefetch" href="/my-blog/assets/js/36.1a72a783.js"><link rel="prefetch" href="/my-blog/assets/js/37.61be6ef9.js"><link rel="prefetch" href="/my-blog/assets/js/38.28aa3cd1.js"><link rel="prefetch" href="/my-blog/assets/js/39.837f3e91.js"><link rel="prefetch" href="/my-blog/assets/js/4.59ea745b.js"><link rel="prefetch" href="/my-blog/assets/js/40.88a919e6.js"><link rel="prefetch" href="/my-blog/assets/js/41.b1570f0f.js"><link rel="prefetch" href="/my-blog/assets/js/42.e8269fb8.js"><link rel="prefetch" href="/my-blog/assets/js/43.ff9eda71.js"><link rel="prefetch" href="/my-blog/assets/js/44.6a5a602c.js"><link rel="prefetch" href="/my-blog/assets/js/45.124f7425.js"><link rel="prefetch" href="/my-blog/assets/js/46.f669140b.js"><link rel="prefetch" href="/my-blog/assets/js/47.5c357118.js"><link rel="prefetch" href="/my-blog/assets/js/48.df63cc62.js"><link rel="prefetch" href="/my-blog/assets/js/49.3b5e6045.js"><link rel="prefetch" href="/my-blog/assets/js/5.cdd16ccc.js"><link rel="prefetch" href="/my-blog/assets/js/50.df0e3b91.js"><link rel="prefetch" href="/my-blog/assets/js/51.d17a87da.js"><link rel="prefetch" href="/my-blog/assets/js/52.fcfc302a.js"><link rel="prefetch" href="/my-blog/assets/js/53.11482175.js"><link rel="prefetch" href="/my-blog/assets/js/54.5fd39631.js"><link rel="prefetch" href="/my-blog/assets/js/55.e0690114.js"><link rel="prefetch" href="/my-blog/assets/js/56.b1964af5.js"><link rel="prefetch" href="/my-blog/assets/js/57.5a38f88d.js"><link rel="prefetch" href="/my-blog/assets/js/58.78487853.js"><link rel="prefetch" href="/my-blog/assets/js/59.151fea2b.js"><link rel="prefetch" href="/my-blog/assets/js/6.bf2d89db.js"><link rel="prefetch" href="/my-blog/assets/js/60.a66ebf27.js"><link rel="prefetch" href="/my-blog/assets/js/61.eb9c600c.js"><link rel="prefetch" href="/my-blog/assets/js/62.1f4682ee.js"><link rel="prefetch" href="/my-blog/assets/js/63.56a7cb25.js"><link rel="prefetch" href="/my-blog/assets/js/64.7a9118a1.js"><link rel="prefetch" href="/my-blog/assets/js/65.7397589a.js"><link rel="prefetch" href="/my-blog/assets/js/66.3602c887.js"><link rel="prefetch" href="/my-blog/assets/js/67.c1546cc4.js"><link rel="prefetch" href="/my-blog/assets/js/68.546a30d9.js"><link rel="prefetch" href="/my-blog/assets/js/69.3c05685d.js"><link rel="prefetch" href="/my-blog/assets/js/7.990a607f.js"><link rel="prefetch" href="/my-blog/assets/js/70.a23795f4.js"><link rel="prefetch" href="/my-blog/assets/js/71.882980c3.js"><link rel="prefetch" href="/my-blog/assets/js/72.8d86cadc.js"><link rel="prefetch" href="/my-blog/assets/js/73.58b6dcf7.js"><link rel="prefetch" href="/my-blog/assets/js/74.36ea8b04.js"><link rel="prefetch" href="/my-blog/assets/js/75.ac8259cc.js"><link rel="prefetch" href="/my-blog/assets/js/76.86a4a403.js"><link rel="prefetch" href="/my-blog/assets/js/77.4b2028c4.js"><link rel="prefetch" href="/my-blog/assets/js/78.4c17fbe2.js"><link rel="prefetch" href="/my-blog/assets/js/79.980b1a2f.js"><link rel="prefetch" href="/my-blog/assets/js/8.5077a692.js"><link rel="prefetch" href="/my-blog/assets/js/80.7b306732.js"><link rel="prefetch" href="/my-blog/assets/js/81.678bb7a5.js"><link rel="prefetch" href="/my-blog/assets/js/82.1aaffd78.js"><link rel="prefetch" href="/my-blog/assets/js/83.5d3ab81c.js"><link rel="prefetch" href="/my-blog/assets/js/84.f73b6af9.js"><link rel="prefetch" href="/my-blog/assets/js/85.87853e7d.js"><link rel="prefetch" href="/my-blog/assets/js/86.7b500b5b.js"><link rel="prefetch" href="/my-blog/assets/js/87.4cc14da6.js"><link rel="prefetch" href="/my-blog/assets/js/88.4dcb650c.js"><link rel="prefetch" href="/my-blog/assets/js/89.a7fc0ea0.js"><link rel="prefetch" href="/my-blog/assets/js/9.2b63b480.js"><link rel="prefetch" href="/my-blog/assets/js/90.937b01ba.js"><link rel="prefetch" href="/my-blog/assets/js/91.d778883e.js"><link rel="prefetch" href="/my-blog/assets/js/92.d88ef0fc.js"><link rel="prefetch" href="/my-blog/assets/js/93.f78b39e0.js"><link rel="prefetch" href="/my-blog/assets/js/94.20e19783.js"><link rel="prefetch" href="/my-blog/assets/js/95.7192b73a.js"><link rel="prefetch" href="/my-blog/assets/js/96.34de2515.js"><link rel="prefetch" href="/my-blog/assets/js/97.7644618c.js"><link rel="prefetch" href="/my-blog/assets/js/98.f4af2778.js"><link rel="prefetch" href="/my-blog/assets/js/99.2659a2a1.js">
    <link rel="stylesheet" href="/my-blog/assets/css/0.styles.ecc0b0a4.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/my-blog/" class="home-link router-link-active"><img src="/my-blog/img/logo.png" alt="程序猿小萨" class="logo"> <span class="site-name can-hide">程序猿小萨</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/my-blog/article/introduction/About.html" class="nav-link">
  关于文档
</a></div><div class="nav-item"><a href="/my-blog/article/introduction/Flag.html" class="nav-link">
  Plan
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术栈" class="dropdown-title"><span class="title">技术栈</span> <span class="arrow down"></span></button> <button type="button" aria-label="技术栈" class="mobile-dropdown-title"><span class="title">技术栈</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/my-blog/article/01-HTML/HTML.html" class="nav-link">
  HTML
</a></li><li class="dropdown-subitem"><a href="/my-blog/article/02-CSS/notes/day01.html" class="nav-link">
  CSS
</a></li><li class="dropdown-subitem"><a href="/my-blog/article/03-H5C3/HTML5&amp;CSS3.html" class="nav-link">
  H5C3
</a></li><li class="dropdown-subitem"><a href="/my-blog/article/04-Project/notes/day01-pingyougou.html" class="nav-link">
  实战
</a></li></ul></li><li class="dropdown-item"><!----> <a href="/my-blog/article/05-mobile/H5C3/HTML5CSS3_day01.html" class="nav-link">
  移动Web
</a></li><li class="dropdown-item"><h4>
          JavaScript
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/my-blog/article/06-JavaScript/01jichu/day01/day01.html" class="nav-link">
  基础
</a></li><li class="dropdown-subitem"><a href="/my-blog/article/06-JavaScript/02-WebAPI/day01/day01_WebAPIs.html" class="nav-link">
  WebAPI
</a></li><li class="dropdown-subitem"><a href="/my-blog/article/06-JavaScript/03-JQuery/day01/day01_jQuery.html" class="nav-link">
  jQuery
</a></li><li class="dropdown-subitem"><a href="/my-blog/article/06-JavaScript/04-Echarts/数据可视化.html" class="nav-link">
  Echarts
</a></li><li class="dropdown-subitem"><a href="/my-blog/article/06-JavaScript/05-gaoji/day01/JavaScript高级第01天笔记.html" class="nav-link">
  高级
</a></li></ul></li><li class="dropdown-item"><h4>
          框架
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/my-blog/article/08-小程序/standard.html" class="nav-link">
  小程序
</a></li><li class="dropdown-subitem"><a href="/my-blog/article/07-Vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-subitem"><a href="/my-blog/article/09-React/" class="nav-link router-link-active">
  React
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具" class="dropdown-title"><span class="title">工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="工具" class="mobile-dropdown-title"><span class="title">工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          随笔
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/my-blog/article/soft/Document.html" class="nav-link">
  博客
</a></li><li class="dropdown-subitem"><a href="/my-blog/article/soft/bookmark.html" class="nav-link">
  书签
</a></li><li class="dropdown-subitem"><a href="/my-blog/article/soft/Notion.html" class="nav-link">
  Notion
</a></li><li class="dropdown-subitem"><a href="/my-blog/article/soft/research.html" class="nav-link">
  待研究
</a></li></ul></li><li class="dropdown-item"><h4>
          在线编辑
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://tinypng.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  图片压缩
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          充电站
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://www.imooc.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  慕课网
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.51zxw.net/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  我要自学网
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          博客
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://space.bilibili.com/1562860055/favlist?fid=1592147955&amp;ftype=create" target="_blank" rel="noopener noreferrer" class="nav-link external">
  B站
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://juejin.im/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://blog.csdn.net/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CSDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.effie.co/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  effie
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div><div class="nav-item"><a href="/my-blog/article/mianshi/Detail.html" class="nav-link">
  面试
</a></div> <a href="https://gitee.com/qarabala/my-blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    源码
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/my-blog/article/introduction/About.html" class="nav-link">
  关于文档
</a></div><div class="nav-item"><a href="/my-blog/article/introduction/Flag.html" class="nav-link">
  Plan
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术栈" class="dropdown-title"><span class="title">技术栈</span> <span class="arrow down"></span></button> <button type="button" aria-label="技术栈" class="mobile-dropdown-title"><span class="title">技术栈</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/my-blog/article/01-HTML/HTML.html" class="nav-link">
  HTML
</a></li><li class="dropdown-subitem"><a href="/my-blog/article/02-CSS/notes/day01.html" class="nav-link">
  CSS
</a></li><li class="dropdown-subitem"><a href="/my-blog/article/03-H5C3/HTML5&amp;CSS3.html" class="nav-link">
  H5C3
</a></li><li class="dropdown-subitem"><a href="/my-blog/article/04-Project/notes/day01-pingyougou.html" class="nav-link">
  实战
</a></li></ul></li><li class="dropdown-item"><!----> <a href="/my-blog/article/05-mobile/H5C3/HTML5CSS3_day01.html" class="nav-link">
  移动Web
</a></li><li class="dropdown-item"><h4>
          JavaScript
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/my-blog/article/06-JavaScript/01jichu/day01/day01.html" class="nav-link">
  基础
</a></li><li class="dropdown-subitem"><a href="/my-blog/article/06-JavaScript/02-WebAPI/day01/day01_WebAPIs.html" class="nav-link">
  WebAPI
</a></li><li class="dropdown-subitem"><a href="/my-blog/article/06-JavaScript/03-JQuery/day01/day01_jQuery.html" class="nav-link">
  jQuery
</a></li><li class="dropdown-subitem"><a href="/my-blog/article/06-JavaScript/04-Echarts/数据可视化.html" class="nav-link">
  Echarts
</a></li><li class="dropdown-subitem"><a href="/my-blog/article/06-JavaScript/05-gaoji/day01/JavaScript高级第01天笔记.html" class="nav-link">
  高级
</a></li></ul></li><li class="dropdown-item"><h4>
          框架
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/my-blog/article/08-小程序/standard.html" class="nav-link">
  小程序
</a></li><li class="dropdown-subitem"><a href="/my-blog/article/07-Vue/" class="nav-link">
  Vue
</a></li><li class="dropdown-subitem"><a href="/my-blog/article/09-React/" class="nav-link router-link-active">
  React
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具" class="dropdown-title"><span class="title">工具</span> <span class="arrow down"></span></button> <button type="button" aria-label="工具" class="mobile-dropdown-title"><span class="title">工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          随笔
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/my-blog/article/soft/Document.html" class="nav-link">
  博客
</a></li><li class="dropdown-subitem"><a href="/my-blog/article/soft/bookmark.html" class="nav-link">
  书签
</a></li><li class="dropdown-subitem"><a href="/my-blog/article/soft/Notion.html" class="nav-link">
  Notion
</a></li><li class="dropdown-subitem"><a href="/my-blog/article/soft/research.html" class="nav-link">
  待研究
</a></li></ul></li><li class="dropdown-item"><h4>
          在线编辑
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://tinypng.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  图片压缩
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          充电站
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://www.imooc.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  慕课网
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.51zxw.net/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  我要自学网
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          博客
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://space.bilibili.com/1562860055/favlist?fid=1592147955&amp;ftype=create" target="_blank" rel="noopener noreferrer" class="nav-link external">
  B站
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://juejin.im/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  掘金
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://blog.csdn.net/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CSDN
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://www.effie.co/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  effie
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div><div class="nav-item"><a href="/my-blog/article/mianshi/Detail.html" class="nav-link">
  面试
</a></div> <a href="https://gitee.com/qarabala/my-blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    源码
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/my-blog/article/09-React/01-基础/day01.html" class="sidebar-link">day01-React 概述&amp;脚手架搭建&amp;JSX&amp;组件</a></li><li><a href="/my-blog/article/09-React/01-基础/day02.html" class="sidebar-link">day02-受控组件&amp;评论案例&amp;props&amp;context</a></li><li><a href="/my-blog/article/09-React/01-基础/day03.html" class="sidebar-link">day03-生命周期&amp;render props模式&amp;高阶组件&amp;原理揭秘</a></li><li><a href="/my-blog/article/09-React/01-基础/day04.html" class="sidebar-link">day04-React原理揭秘&amp;React路由基础</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>好租客</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/my-blog/article/09-React/02-好租客/react好租客项目Day01-项目演示&amp;项目搭建&amp;antd-mobile的TabBar使用.html" class="sidebar-link">好客租房移动Web - 上</a></li><li><a href="/my-blog/article/09-React/02-好租客/react好租客项目Day02.html" class="sidebar-link">首页模块</a></li><li><a href="/my-blog/article/09-React/02-好租客/react好租客项目Day03-城市选择功能&amp;react-virtualized组件使用.html" class="sidebar-link">城市选择模块</a></li><li><a href="/my-blog/article/09-React/02-好租客/react好租客项目Day04-城市列表索引列相关功能&amp;封装NavHeader&amp;CSS IN JS.html" class="sidebar-link">渲染城市列表</a></li><li><a href="/my-blog/article/09-React/02-好租客/react好租客项目Day05-根据定位展示对应城市&amp;地图找房模块封装&amp;loading美化.html" class="sidebar-link">地图找房模块</a></li><li><a href="/my-blog/article/09-React/02-好租客/react好租客项目Day06.html" class="sidebar-link">axios优化&amp;环境变量</a></li><li><a href="/my-blog/article/09-React/02-好租客/react好租客项目Day07-条件筛选功能实现&amp;FilterTitle组件功能实现&amp;房屋列表数据获取.html" class="sidebar-link">列表找房模块-条件筛选</a></li><li><a href="/my-blog/article/09-React/02-好租客/react好租客项目Day08-房屋列表滚动&amp;加载更多&amp;吸顶功能&amp;bug定位&amp;react-spring.html" class="sidebar-link">列表找房模块-房屋列表</a></li><li><a href="/my-blog/article/09-React/02-好租客/react好租客项目Day09-房屋详情&amp;路由配置&amp;登录功能&amp;formik表单校验.html" class="sidebar-link">房屋详情模块-准备工作</a></li><li><a href="/my-blog/article/09-React/02-好租客/react好租客项目Day10-检测是否登&amp;退出&amp;axios拦截器&amp;鉴权路由&amp;收藏模块.html" class="active sidebar-link">我的页面</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/my-blog/article/09-React/02-好租客/react好租客项目Day10-检测是否登&amp;退出&amp;axios拦截器&amp;鉴权路由&amp;收藏模块.html#目标" class="sidebar-link">目标</a></li><li class="sidebar-sub-header"><a href="/my-blog/article/09-React/02-好租客/react好租客项目Day10-检测是否登&amp;退出&amp;axios拦截器&amp;鉴权路由&amp;收藏模块.html#结构和样式" class="sidebar-link">结构和样式</a></li><li class="sidebar-sub-header"><a href="/my-blog/article/09-React/02-好租客/react好租客项目Day10-检测是否登&amp;退出&amp;axios拦截器&amp;鉴权路由&amp;收藏模块.html#功能分析" class="sidebar-link">功能分析</a></li><li class="sidebar-sub-header"><a href="/my-blog/article/09-React/02-好租客/react好租客项目Day10-检测是否登&amp;退出&amp;axios拦截器&amp;鉴权路由&amp;收藏模块.html#判断用户是否登陆步骤-★★★" class="sidebar-link">判断用户是否登陆步骤（★★★）</a></li><li class="sidebar-sub-header"><a href="/my-blog/article/09-React/02-好租客/react好租客项目Day10-检测是否登&amp;退出&amp;axios拦截器&amp;鉴权路由&amp;收藏模块.html#退出功能-★★★" class="sidebar-link">退出功能（★★★）</a></li><li class="sidebar-sub-header"><a href="/my-blog/article/09-React/02-好租客/react好租客项目Day10-检测是否登&amp;退出&amp;axios拦截器&amp;鉴权路由&amp;收藏模块.html#目标-2" class="sidebar-link">目标</a></li><li class="sidebar-sub-header"><a href="/my-blog/article/09-React/02-好租客/react好租客项目Day10-检测是否登&amp;退出&amp;axios拦截器&amp;鉴权路由&amp;收藏模块.html#概述" class="sidebar-link">概述</a></li><li class="sidebar-sub-header"><a href="/my-blog/article/09-React/02-好租客/react好租客项目Day10-检测是否登&amp;退出&amp;axios拦截器&amp;鉴权路由&amp;收藏模块.html#功能处理-使用axios拦截器统一处理token-★★★" class="sidebar-link">功能处理-使用axios拦截器统一处理token（★★★）</a></li><li class="sidebar-sub-header"><a href="/my-blog/article/09-React/02-好租客/react好租客项目Day10-检测是否登&amp;退出&amp;axios拦截器&amp;鉴权路由&amp;收藏模块.html#页面处理-authroute鉴权路由组件-★★★" class="sidebar-link">页面处理-AuthRoute鉴权路由组件（★★★）</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/my-blog/article/09-React/02-好租客/react好租客项目Day10-检测是否登&amp;退出&amp;axios拦截器&amp;鉴权路由&amp;收藏模块.html#实现原理" class="sidebar-link">实现原理</a></li><li class="sidebar-sub-header"><a href="/my-blog/article/09-React/02-好租客/react好租客项目Day10-检测是否登&amp;退出&amp;axios拦截器&amp;鉴权路由&amp;收藏模块.html#封装authroute鉴权路由组件" class="sidebar-link">封装AuthRoute鉴权路由组件</a></li><li class="sidebar-sub-header"><a href="/my-blog/article/09-React/02-好租客/react好租客项目Day10-检测是否登&amp;退出&amp;axios拦截器&amp;鉴权路由&amp;收藏模块.html#修改登录成功跳转" class="sidebar-link">修改登录成功跳转</a></li></ul></li><li class="sidebar-sub-header"><a href="/my-blog/article/09-React/02-好租客/react好租客项目Day10-检测是否登&amp;退出&amp;axios拦截器&amp;鉴权路由&amp;收藏模块.html#目标-3" class="sidebar-link">目标</a></li><li class="sidebar-sub-header"><a href="/my-blog/article/09-React/02-好租客/react好租客项目Day10-检测是否登&amp;退出&amp;axios拦截器&amp;鉴权路由&amp;收藏模块.html#功能分析-2" class="sidebar-link">功能分析</a></li><li class="sidebar-sub-header"><a href="/my-blog/article/09-React/02-好租客/react好租客项目Day10-检测是否登&amp;退出&amp;axios拦截器&amp;鉴权路由&amp;收藏模块.html#检查房源是否收藏-★★" class="sidebar-link">检查房源是否收藏（★★）</a></li><li class="sidebar-sub-header"><a href="/my-blog/article/09-React/02-好租客/react好租客项目Day10-检测是否登&amp;退出&amp;axios拦截器&amp;鉴权路由&amp;收藏模块.html#收藏房源-★★★" class="sidebar-link">收藏房源（★★★）</a></li></ul></li><li><a href="/my-blog/article/09-React/02-好租客/react好租客项目Day11-发布房源模块.html" class="sidebar-link">房源发布模块</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>01-react基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/my-blog/article/09-React/03-heima-react-doc/01-react基础/01-React入门.html" class="sidebar-link">React 课程安排</a></li><li><a href="/my-blog/article/09-React/03-heima-react-doc/01-react基础/02-组件基础.html" class="sidebar-link">React 组件</a></li><li><a href="/my-blog/article/09-React/03-heima-react-doc/01-react基础/03- 组件通讯-概念.html" class="sidebar-link">组件通信</a></li><li><a href="/my-blog/article/09-React/03-heima-react-doc/01-react基础/04-组件生命周期.html" class="sidebar-link">生命周期</a></li><li><a href="/my-blog/article/09-React/03-heima-react-doc/01-react基础/05-react原理揭秘.html" class="sidebar-link">setState</a></li><li><a href="/my-blog/article/09-React/03-heima-react-doc/01-react基础/06-react路由.html" class="sidebar-link">路由</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>02-react-极客园pc</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/my-blog/article/09-React/03-heima-react-doc/02-react-极客园pc/01-项目搭建.html" class="sidebar-link">项目介绍</a></li><li><a href="/my-blog/article/09-React/03-heima-react-doc/02-react-极客园pc/02-登录功能.html" class="sidebar-link">项目功能 - 登录</a></li><li><a href="/my-blog/article/09-React/03-heima-react-doc/02-react-极客园pc/03-首页.html" class="sidebar-link">react样式冲突</a></li><li><a href="/my-blog/article/09-React/03-heima-react-doc/02-react-极客园pc/04-文章列表.html" class="sidebar-link">文章列表功能</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>03-react-hooks</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/my-blog/article/09-React/03-heima-react-doc/03-react-hooks/01-hooks基本使用.html" class="sidebar-link">React Hooks</a></li><li><a href="/my-blog/article/09-React/03-heima-react-doc/03-react-hooks/02-hooks进阶.html" class="sidebar-link">hooks 进阶</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>04-react-redux</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/my-blog/article/09-React/03-heima-react-doc/04-react-redux/redux-基础.html" class="sidebar-link">Redux基础</a></li><li><a href="/my-blog/article/09-React/03-heima-react-doc/04-react-redux/redux-进阶（中间件）.html" class="sidebar-link">Redux 中间件</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>05-typescript</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/my-blog/article/09-React/03-heima-react-doc/05-typescript/typescript笔记/01-TypeScript 介绍.html" class="sidebar-link">TypeScript介绍</a></li><li><a href="/my-blog/article/09-React/03-heima-react-doc/05-typescript/typescript笔记/02-TypeScript 常用类型.html" class="sidebar-link">TypeScript 常用类型</a></li><li><a href="/my-blog/article/09-React/03-heima-react-doc/05-typescript/typescript笔记/03-TypeScript 高级类型.html" class="sidebar-link">TypeScript 高级类型</a></li><li><a href="/my-blog/article/09-React/03-heima-react-doc/05-typescript/typescript笔记/04-TS项目初始化与类型声明文件.html" class="sidebar-link">在 React 项目中使用 TS</a></li><li><a href="/my-blog/article/09-React/03-heima-react-doc/05-typescript/typescript笔记/05-React与Typescript.html" class="sidebar-link">React与Typescript</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>06-react-极客园</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/my-blog/article/09-React/03-heima-react-doc/06-react-极客园/01-项目准备.html" class="sidebar-link">项目准备</a></li><li><a href="/my-blog/article/09-React/03-heima-react-doc/06-react-极客园/02-登录模块.html" class="sidebar-link">极客园H5项目【登录模块】</a></li><li><a href="/my-blog/article/09-React/03-heima-react-doc/06-react-极客园/03-布局页面.html" class="sidebar-link">布局页面</a></li><li><a href="/my-blog/article/09-React/03-heima-react-doc/06-react-极客园/04-个人中心.html" class="sidebar-link">个人中心</a></li><li><a href="/my-blog/article/09-React/03-heima-react-doc/06-react-极客园/05-小智同学.html" class="sidebar-link">小智同学</a></li><li><a href="/my-blog/article/09-React/03-heima-react-doc/06-react-极客园/06-首页.html" class="sidebar-link">首页模块</a></li><li><a href="/my-blog/article/09-React/03-heima-react-doc/06-react-极客园/07-搜索功能.html" class="sidebar-link">文章搜索</a></li><li><a href="/my-blog/article/09-React/03-heima-react-doc/06-react-极客园/08-文章详情.html" class="sidebar-link">文章详情</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>07-react原理揭秘</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/my-blog/article/09-React/03-heima-react-doc/07-react原理揭秘/01-react-组件复用.html" class="sidebar-link">任务</a></li><li><a href="/my-blog/article/09-React/03-heima-react-doc/07-react原理揭秘/02-setState.html" class="sidebar-link">setState</a></li><li><a href="/my-blog/article/09-React/03-heima-react-doc/07-react原理揭秘/03-hooks进阶.html" class="sidebar-link">Hooks 进阶</a></li><li><a href="/my-blog/article/09-React/03-heima-react-doc/07-react原理揭秘/04-就业加强.html" class="sidebar-link">React 核心原理</a></li><li><a href="/my-blog/article/09-React/03-heima-react-doc/07-react原理揭秘/05-就业加强.html" class="sidebar-link">01 - connect</a></li><li><a href="/my-blog/article/09-React/03-heima-react-doc/07-react原理揭秘/项目.html" class="sidebar-link">项目</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>黑马React资料-2022</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/my-blog/article/09-React/04-react-basic-2022/01-React 基础.html" class="sidebar-link">01-React 基础</a></li><li><a href="/my-blog/article/09-React/04-react-basic-2022/02-组件基础.html" class="sidebar-link">02-组件基础</a></li><li><a href="/my-blog/article/09-React/04-react-basic-2022/03-组件通讯.html" class="sidebar-link">03-组件通讯</a></li><li><a href="/my-blog/article/09-React/04-react-basic-2022/04-组件生命周期.html" class="sidebar-link">组件的生命周期</a></li><li><a href="/my-blog/article/09-React/04-react-basic-2022/05-react原理揭秘.html" class="sidebar-link">05-react原理揭秘</a></li><li><a href="/my-blog/article/09-React/04-react-basic-2022/06-react路由.html" class="sidebar-link">06-react路由</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="我的页面"><a href="#我的页面" class="header-anchor">#</a> 我的页面</h1> <h2 id="目标"><a href="#目标" class="header-anchor">#</a> 目标</h2> <ul><li>我的页面能够实现判断用户登录状态来显示不同的效果</li> <li>能够实现退出登录功能</li></ul> <h2 id="结构和样式"><a href="#结构和样式" class="header-anchor">#</a> 结构和样式</h2> <ul><li>对应的结构样式可以直接拿过来用，我们最主要要实现里面的代码逻辑，文件在 pages/Profile/index</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>root<span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token comment">/* 个人信息 */</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>img
            className<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>bg<span class="token punctuation">}</span>
            src<span class="token operator">=</span><span class="token punctuation">{</span><span class="token constant">BASE_URL</span> <span class="token operator">+</span> <span class="token string">'/img/profile/bg.png'</span><span class="token punctuation">}</span>
            alt<span class="token operator">=</span><span class="token string">&quot;背景图&quot;</span>
          <span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>info<span class="token punctuation">}</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>myIcon<span class="token punctuation">}</span><span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>img
                className<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>avatar<span class="token punctuation">}</span>
                src<span class="token operator">=</span><span class="token punctuation">{</span>avatar <span class="token operator">||</span> <span class="token constant">DEFAULT_AVATAR</span><span class="token punctuation">}</span>
                alt<span class="token operator">=</span><span class="token string">&quot;icon&quot;</span>
              <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>user<span class="token punctuation">}</span><span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>nickname <span class="token operator">||</span> <span class="token string">'游客'</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
              <span class="token punctuation">{</span><span class="token comment">/* 登录后展示： */</span><span class="token punctuation">}</span>
              <span class="token punctuation">{</span>isLogin <span class="token operator">?</span> <span class="token punctuation">(</span>
                <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
                  <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>auth<span class="token punctuation">}</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>span onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>logout<span class="token punctuation">}</span><span class="token operator">&gt;</span>退出<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
                  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
                  <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>edit<span class="token punctuation">}</span><span class="token operator">&gt;</span>
                    编辑个人资料
                    <span class="token operator">&lt;</span>span className<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>arrow<span class="token punctuation">}</span><span class="token operator">&gt;</span>
                      <span class="token operator">&lt;</span>i className<span class="token operator">=</span><span class="token string">&quot;iconfont icon-arrow&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
                  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
              <span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span>
                <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>edit<span class="token punctuation">}</span><span class="token operator">&gt;</span>
                  <span class="token operator">&lt;</span>Button
                    type<span class="token operator">=</span><span class="token string">&quot;primary&quot;</span>
                    size<span class="token operator">=</span><span class="token string">&quot;small&quot;</span>
                    inline
                    onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> history<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/login'</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
                  <span class="token operator">&gt;</span>
                    去登录
                  <span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
              <span class="token punctuation">)</span><span class="token punctuation">}</span>
              <span class="token punctuation">{</span><span class="token comment">/* 未登录展示： */</span><span class="token punctuation">}</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token comment">/* 九宫格菜单 */</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>Grid
          data<span class="token operator">=</span><span class="token punctuation">{</span>menus<span class="token punctuation">}</span>
          <span class="token comment">// 列数</span>
          columnNum<span class="token operator">=</span><span class="token punctuation">{</span><span class="token number">3</span><span class="token punctuation">}</span>
          <span class="token comment">// 不需要分割线</span>
          hasLine<span class="token operator">=</span><span class="token punctuation">{</span><span class="token boolean">false</span><span class="token punctuation">}</span>
          <span class="token comment">// 渲染每一项</span>
          renderItem<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span>
            item<span class="token punctuation">.</span>to <span class="token operator">?</span> <span class="token punctuation">(</span>
              <span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>to<span class="token punctuation">}</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>menuItem<span class="token punctuation">}</span><span class="token operator">&gt;</span>
                  <span class="token operator">&lt;</span>i className<span class="token operator">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">iconfont </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>item<span class="token punctuation">.</span>iconfont<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
                  <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">&gt;</span>
            <span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span>
              <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>menuItem<span class="token punctuation">}</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>i className<span class="token operator">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">iconfont </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>item<span class="token punctuation">.</span>iconfont<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
                <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
            <span class="token punctuation">)</span>
          <span class="token punctuation">}</span>
        <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token comment">/* 加入我们 */</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>ad<span class="token punctuation">}</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token punctuation">{</span><span class="token constant">BASE_URL</span> <span class="token operator">+</span> <span class="token string">'/img/profile/join.png'</span><span class="token punctuation">}</span> alt<span class="token operator">=</span><span class="token string">&quot;&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br></div></div><h2 id="功能分析"><a href="#功能分析" class="header-anchor">#</a> 功能分析</h2> <ul><li>判断是否登录（本地缓存中是否有token信息，直接调用isAuth() 方法即可，这里在utils/auth.js文件中已经封装好了）</li> <li>如果登录了，就发送请求获取个人资料，并且在页面中展示个人资料</li> <li>如果没有登录，则不获取个人资料，只在页面中展示未登录信息</li> <li>在页面中展示登录或未登录信息，就要通过state变化来体现，因此，需要一个标示是否登录的状态</li></ul> <p><img src="data:image/png;base64,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" alt=""></p> <h2 id="判断用户是否登陆步骤-★★★"><a href="#判断用户是否登陆步骤-★★★" class="header-anchor">#</a> 判断用户是否登陆步骤（★★★）</h2> <ul><li>在state中添加两个状态：isLogin（是否登录）和userInfo（用户信息）</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">// 是否登录</span>
    <span class="token literal-property property">isLogin</span><span class="token operator">:</span> <span class="token function">isAuth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token comment">// 用户信息</span>
    <span class="token literal-property property">userInfo</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">avatar</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      <span class="token literal-property property">nickname</span><span class="token operator">:</span> <span class="token string">''</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ul><li>从utils中导入isAuth（登录状态）、getToken（获取token）</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">BASE_URL</span><span class="token punctuation">,</span> isAuth<span class="token punctuation">,</span> getToken<span class="token punctuation">,</span> <span class="token constant">API</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'../../utils'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>创建方法getUserInfo，用户来获取个人资料</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token function">getUserInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>在方法中，通过isLogin判断用户是否登录</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>isLogin<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 未登录</span>
    <span class="token keyword">return</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>如果没有登录，则不发送请求，渲染未登录信息</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 对用结构使用状态来判断显示登录还是未登录UI</span>
 <span class="token punctuation">{</span><span class="token comment">/* 登录后展示： */</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span>isLogin <span class="token operator">?</span> <span class="token punctuation">(</span>
  <span class="token operator">&lt;</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>auth<span class="token punctuation">}</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span>span onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>logout<span class="token punctuation">}</span><span class="token operator">&gt;</span>退出<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>edit<span class="token punctuation">}</span><span class="token operator">&gt;</span>
      编辑个人资料
      <span class="token operator">&lt;</span>span className<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>arrow<span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>i className<span class="token operator">=</span><span class="token string">&quot;iconfont icon-arrow&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
<span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>edit<span class="token punctuation">}</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>Button
      type<span class="token operator">=</span><span class="token string">&quot;primary&quot;</span>
      size<span class="token operator">=</span><span class="token string">&quot;small&quot;</span>
      inline
      onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> history<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/login'</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
    <span class="token operator">&gt;</span>
      去登录
    <span class="token operator">&lt;</span><span class="token operator">/</span>Button<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
<span class="token punctuation">)</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><ul><li>如果已登录，就根据接口发送请求，获取用户个人资料</li> <li>渲染个人资料数据</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token function">getUserInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>isLogin<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 未登录</span>
    <span class="token keyword">return</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 发送请求，获取个人资料</span>
  <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token constant">API</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/user'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">authorization</span><span class="token operator">:</span> <span class="token function">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 请求成功</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> avatar<span class="token punctuation">,</span> nickname <span class="token punctuation">}</span> <span class="token operator">=</span> res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>body
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">userInfo</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">avatar</span><span class="token operator">:</span> <span class="token constant">BASE_URL</span> <span class="token operator">+</span> avatar<span class="token punctuation">,</span>
        nickname
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>


<span class="token comment">// render方法中 </span>
<span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> history <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props

    <span class="token keyword">const</span> <span class="token punctuation">{</span>
      isLogin<span class="token punctuation">,</span>
      <span class="token literal-property property">userInfo</span><span class="token operator">:</span> <span class="token punctuation">{</span> avatar<span class="token punctuation">,</span> nickname <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>root<span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token punctuation">{</span><span class="token comment">/* 个人信息 */</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>img
            className<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>bg<span class="token punctuation">}</span>
            src<span class="token operator">=</span><span class="token punctuation">{</span><span class="token constant">BASE_URL</span> <span class="token operator">+</span> <span class="token string">'/img/profile/bg.png'</span><span class="token punctuation">}</span>
            alt<span class="token operator">=</span><span class="token string">&quot;背景图&quot;</span>
          <span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>info<span class="token punctuation">}</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>myIcon<span class="token punctuation">}</span><span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>img
                className<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>avatar<span class="token punctuation">}</span>
                src<span class="token operator">=</span><span class="token punctuation">{</span>avatar <span class="token operator">||</span> <span class="token constant">DEFAULT_AVATAR</span><span class="token punctuation">}</span>
                alt<span class="token operator">=</span><span class="token string">&quot;icon&quot;</span>
              <span class="token operator">/</span><span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
            <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>user<span class="token punctuation">}</span><span class="token operator">&gt;</span>
              <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>name<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>nickname <span class="token operator">||</span> <span class="token string">'游客'</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
              <span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br></div></div><h2 id="退出功能-★★★"><a href="#退出功能-★★★" class="header-anchor">#</a> 退出功能（★★★）</h2> <ul><li>点击退出按钮，弹出对话框，提示是否确定退出</li> <li>给退出按钮绑定点击事件，创建方法logout作为事件处理函数</li> <li>导入Modal对话框组件（弹出模态框）</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span><span class="token operator">...</span><span class="token punctuation">,</span> Modal <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'antd-mobile'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>在方法中，拷贝Modal组件文件高中确认对话框的示例代码</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> alert <span class="token operator">=</span> Modal<span class="token punctuation">.</span>alert
<span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'Delete'</span><span class="token punctuation">,</span> <span class="token string">'Are you sure?'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'Cancel'</span><span class="token punctuation">,</span><span class="token function-variable function">onPress</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>'cancel<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'Ok'</span><span class="token punctuation">,</span> <span class="token function-variable function">onPress</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'ok'</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>修改对话框的文字提示</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'提示'</span><span class="token punctuation">,</span> <span class="token string">'是否确定退出?'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'取消'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'退出'</span><span class="token punctuation">,</span> <span class="token function-variable function">onPress</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'ok'</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>在退出按钮的事件处理程序中，先调用退出接口（让服务器端退出），再移除本地token（本地退出）</li> <li>把登录状态isLogin设置为false</li> <li>清空用户状态对象</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'退出'</span><span class="token punctuation">,</span>
  <span class="token function-variable function">onPress</span><span class="token operator">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 调用退出接口</span>
    <span class="token keyword">await</span> <span class="token constant">API</span><span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/user/logout'</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">authorization</span><span class="token operator">:</span> <span class="token function">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token comment">// 移除本地token</span>
    <span class="token function">removeToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token comment">// 处理状态</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">isLogin</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token literal-property property">userInfo</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">avatar</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
        <span class="token literal-property property">nickname</span><span class="token operator">:</span> <span class="token string">''</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h1 id="登录访问控制"><a href="#登录访问控制" class="header-anchor">#</a> 登录访问控制</h1> <h2 id="目标-2"><a href="#目标-2" class="header-anchor">#</a> 目标</h2> <ul><li>理解访问控制中的两种功能和两种页面</li> <li>能够说出处理两种功能用什么方式来实现</li> <li>能够写出 axios请求拦截器与响应拦截器，并且能够说出这两种拦截器分别在什么时候触发，有什么作用</li> <li>能够说出处理两种页面用什么方式来实现</li> <li>能够说出AuthRoute 鉴权路由组件实现思路</li> <li>能够参照官网自己封装AuthRoute 鉴权路由组件</li> <li>能够实现修改登录成功后的跳转</li></ul> <h2 id="概述"><a href="#概述" class="header-anchor">#</a> 概述</h2> <p>项目中的两种类型的功能和两种类型的页面：</p> <p>两种功能：</p> <ul><li>登录后才能进行操作（比如：获取个人资料）</li> <li>不需要登录就可以操作（比如：获取房屋列表）</li></ul> <p>两种页面：</p> <ul><li>需要登录才能访问（比如：发布房源页）</li> <li>不需要登录即可访问（比如：首页）</li></ul> <p>对于需要登录才能操作的功能使用 <strong>axios 拦截器</strong> 进行处理（比如：统一添加请求头 authorization等）</p> <p>对于需要登录才能访问的页面使用 <strong>路由控制</strong></p> <h2 id="功能处理-使用axios拦截器统一处理token-★★★"><a href="#功能处理-使用axios拦截器统一处理token-★★★" class="header-anchor">#</a> 功能处理-使用axios拦截器统一处理token（★★★）</h2> <ul><li>在api.js 中，添加请求拦截器  (API.interceptors.request.user())</li> <li>获取到当前请求的接口路径（url）</li> <li>判断接口路径，是否是以/user 开头，并且不是登录或注册接口（只给需要的接口添加请求头）</li> <li>如果是，就添加请求头Authorization</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 添加请求拦截器</span>
<span class="token constant">API</span><span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token parameter">config</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> url <span class="token punctuation">}</span> <span class="token operator">=</span> config
  <span class="token comment">// 判断请求url路径</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>
    url<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">'/user'</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
    <span class="token operator">!</span>url<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">'/user/login'</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span>
    <span class="token operator">!</span>url<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">'/user/registered'</span><span class="token punctuation">)</span>
  <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 添加请求头</span>
    config<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>Authorization <span class="token operator">=</span> <span class="token function">getToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> config
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><ul><li>添加响应拦截器 (API.interceptors.response.use())</li> <li>判断返回值中的状态码</li> <li>如果是400，标示token超时或异常，直接移除token</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 添加响应拦截器</span>
<span class="token constant">API</span><span class="token punctuation">.</span>interceptors<span class="token punctuation">.</span>response<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token parameter">response</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> status <span class="token punctuation">}</span> <span class="token operator">=</span> response<span class="token punctuation">.</span>data
  <span class="token keyword">if</span> <span class="token punctuation">(</span>status <span class="token operator">===</span> <span class="token number">400</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 此时，说明 token 失效，直接移除 token 即可</span>
    <span class="token function">removeToken</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> response
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="页面处理-authroute鉴权路由组件-★★★"><a href="#页面处理-authroute鉴权路由组件-★★★" class="header-anchor">#</a> 页面处理-AuthRoute鉴权路由组件（★★★）</h2> <h3 id="实现原理"><a href="#实现原理" class="header-anchor">#</a> 实现原理</h3> <ul><li><p>限制某个页面只能在登陆的情况下访问，但是在React路由中并没有直接提供该组件，需要手动封装，来实现登陆访问控制（类似与Vue路由的导航守卫）</p></li> <li><p>参数 react-router-dom的<a href="https://reacttraining.com/react-router/web/wxample/auth-workflow" target="_blank" rel="noopener noreferrer">鉴权文档<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p>AuthRoute 组件实际上就是对原来Route组件做了一次包装，来实现一些额外的功能</p> <ul><li>使用</li></ul> <p><img src="data:image/png;base64,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" alt=""></p></li> <li><p>render方法：render props模式，指定该路由要渲染的组件内容</p></li> <li><p>Redirect组件：重定向组件，通过to属性，指定要跳转的路由信息</p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 官网封装的核心逻辑代码</span>
<span class="token comment">// ...rest  把之前的组件中传递的属性原封不动传递过来</span>
<span class="token keyword">function</span> <span class="token function">PrivateRoute</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> <span class="token literal-property property">component</span><span class="token operator">:</span> Component<span class="token punctuation">,</span> <span class="token operator">...</span>rest <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Route
      <span class="token punctuation">{</span><span class="token operator">...</span>rest<span class="token punctuation">}</span>
      <span class="token comment">// render方法： render props模式，指定该路由要渲染的组件内容</span>
      render<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">props</span> <span class="token operator">=&gt;</span>
        <span class="token comment">// 判断是否登陆，如果登陆，跳转配置的component，如果没有登陆，利用 Redirect组件来进行重定向</span>
        fakeAuth<span class="token punctuation">.</span>isAuthenticated <span class="token operator">?</span> <span class="token punctuation">(</span>
          <span class="token operator">&lt;</span>Component <span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span>
          <span class="token operator">&lt;</span>Redirect
            to<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
              <span class="token literal-property property">pathname</span><span class="token operator">:</span> <span class="token string">&quot;/login&quot;</span><span class="token punctuation">,</span>
              <span class="token comment">// 把当前的页面路径保存起来，方便用户登录后能够跳回当前页面</span>
              <span class="token literal-property property">state</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">from</span><span class="token operator">:</span> props<span class="token punctuation">.</span>location <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">}</span>
          <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h3 id="封装authroute鉴权路由组件"><a href="#封装authroute鉴权路由组件" class="header-anchor">#</a> 封装AuthRoute鉴权路由组件</h3> <ul><li>在components目录中创建AuthRoute/index.js 文件</li> <li>创建组件AuthRoute并导出</li> <li>在AuthRoute组件中返回Route组件（在Route基础上做了一层包装，用于实现自定义功能）</li> <li>给Route组件，添加render方法，指定改组件要渲染的内容（类似与component属性）</li> <li>在render方法中，调用isAuth() 判断是否登陆</li> <li>如果登陆了，就渲染当前组件（通过参数component获取到要渲染的组件，需要重命名）</li> <li>如果没有登陆，就重定向到登陆页面，并且指定登陆成功后腰跳转的页面路径</li> <li>将AuthRoute组件接收到的props原样传递给Route组件（保证与Route组件使用方式相同）</li> <li>使用AuthRoute组件配置路由规则，验证是否实现页面的登陆访问控制</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">AuthRoute</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> <span class="token literal-property property">component</span><span class="token operator">:</span> Component<span class="token punctuation">,</span> <span class="token operator">...</span>rest <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Route
      <span class="token punctuation">{</span><span class="token operator">...</span>rest<span class="token punctuation">}</span>
      render<span class="token operator">=</span><span class="token punctuation">{</span><span class="token parameter">props</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> isLogin <span class="token operator">=</span> <span class="token function">isAuth</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>isLogin<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// 已登录</span>
          <span class="token comment">// 将 props 传递给组件，组件中才能获取到路由相关信息</span>
          <span class="token keyword">return</span> <span class="token operator">&lt;</span>Component <span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
          <span class="token comment">// 未登录</span>
          <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>Redirect
              to<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span>
                <span class="token literal-property property">pathname</span><span class="token operator">:</span> <span class="token string">'/login'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">state</span><span class="token operator">:</span> <span class="token punctuation">{</span>
                  <span class="token literal-property property">from</span><span class="token operator">:</span> props<span class="token punctuation">.</span>location
                <span class="token punctuation">}</span>
              <span class="token punctuation">}</span><span class="token punctuation">}</span>
            <span class="token operator">/</span><span class="token operator">&gt;</span>
          <span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">}</span>
    <span class="token operator">/</span><span class="token operator">&gt;</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> AuthRoute
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h3 id="修改登录成功跳转"><a href="#修改登录成功跳转" class="header-anchor">#</a> 修改登录成功跳转</h3> <ul><li>登陆成功后，判断是否需要跳转到用户想要访问的页面（判断props.location.state 是否有值）</li> <li>如果不需要，则直接调用history.go(-1) 返回上一页</li> <li>如果需要，就跳转到from.pathname 指定的页面（推荐使用replace方法模式，不是push）</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code> <span class="token comment">// 表单的提交事件</span>
  <span class="token function-variable function">handleSubmit</span><span class="token operator">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">values<span class="token punctuation">,</span> <span class="token punctuation">{</span> props <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 登录成功</span>
      localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">'hkzf_token'</span><span class="token punctuation">,</span> body<span class="token punctuation">.</span>token<span class="token punctuation">)</span>

      <span class="token comment">/* 
        1 登录成功后，判断是否需要跳转到用户想要访问的页面（判断 props.location.state 是否有值）。
        2 如果不需要（没有值），则直接调用 history.go(-1) 返回上一页。
        3 如果需要，就跳转到 from.pathname 指定的页面（推荐使用 replace 方法模式，而不是 push）。
      */</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>props<span class="token punctuation">.</span>location<span class="token punctuation">.</span>state<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 此时，表示是直接进入到了该页面，直接调用 go(-1) 即可</span>
        props<span class="token punctuation">.</span>history<span class="token punctuation">.</span><span class="token function">go</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// replace: [home, map]</span>
        props<span class="token punctuation">.</span>history<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>location<span class="token punctuation">.</span>state<span class="token punctuation">.</span>from<span class="token punctuation">.</span>pathname<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token comment">// 登录失败</span>
      Toast<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>description<span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h1 id="我的收藏模块"><a href="#我的收藏模块" class="header-anchor">#</a> 我的收藏模块</h1> <h2 id="目标-3"><a href="#目标-3" class="header-anchor">#</a> 目标</h2> <ul><li>能够实现检测房源是否收藏</li> <li>能够实现收藏房源功能</li></ul> <h2 id="功能分析-2"><a href="#功能分析-2" class="header-anchor">#</a> 功能分析</h2> <ul><li>收藏房源</li> <li>功能：
<ul><li>检查房源是否收藏</li> <li>收藏房源</li></ul></li></ul> <h2 id="检查房源是否收藏-★★"><a href="#检查房源是否收藏-★★" class="header-anchor">#</a> 检查房源是否收藏（★★）</h2> <ul><li>在state中添加状态，isFavorite（表示是否收藏），默认值是false</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>state<span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token comment">// 表示房源是否收藏</span>
    <span class="token literal-property property">isFavorite</span><span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>创建方法 checkFavorite，在进入房源详情页面时调用该方法</li> <li>先调用isAuth方法，来判断是否登陆</li> <li>如果未登录，直接return，不再检查是否收藏</li> <li>如果已登陆，从路由参数中，获取当前房屋id</li> <li>使用API调用接口，查询该房源是否收藏</li> <li>如果返回状态码为200，就更新isFavorite；否则，不做任何处理</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">async</span> <span class="token function">checkFavorite</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> isLogin <span class="token operator">=</span> <span class="token function">isAuth</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isLogin<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 没有登录</span>
      <span class="token keyword">return</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 已登录</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> id <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>match<span class="token punctuation">.</span>params
    <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token constant">API</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/user/favorites/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>

    <span class="token keyword">const</span> <span class="token punctuation">{</span> status<span class="token punctuation">,</span> body <span class="token punctuation">}</span> <span class="token operator">=</span> res<span class="token punctuation">.</span>data
    <span class="token keyword">if</span> <span class="token punctuation">(</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 表示请求已经成功，需要更新 isFavorite 的值</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">isFavorite</span><span class="token operator">:</span> body<span class="token punctuation">.</span>isFavorite
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><ul><li>在页面结构中，通过状态isFavorite修改收藏按钮的文字和图片内容</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span><span class="token comment">/* 底部收藏按钮 */</span><span class="token punctuation">}</span>
<span class="token operator">&lt;</span>Flex className<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>fixedBottom<span class="token punctuation">}</span><span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>Flex<span class="token punctuation">.</span>Item<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>img
      src<span class="token operator">=</span><span class="token punctuation">{</span>
        <span class="token constant">BASE_URL</span> <span class="token operator">+</span> <span class="token punctuation">(</span>isFavorite <span class="token operator">?</span> <span class="token string">'/img/star.png'</span> <span class="token operator">:</span> <span class="token string">'/img/unstar.png'</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      className<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>favoriteImg<span class="token punctuation">}</span>
      alt<span class="token operator">=</span><span class="token string">&quot;收藏&quot;</span>
    <span class="token operator">/</span><span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>span className<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>favorite<span class="token punctuation">}</span><span class="token operator">&gt;</span>
      <span class="token punctuation">{</span>isFavorite <span class="token operator">?</span> <span class="token string">'已收藏'</span> <span class="token operator">:</span> <span class="token string">'收藏'</span><span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>Flex<span class="token punctuation">.</span>Item<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>Flex<span class="token punctuation">.</span>Item<span class="token operator">&gt;</span>在线咨询<span class="token operator">&lt;</span><span class="token operator">/</span>Flex<span class="token punctuation">.</span>Item<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span>Flex<span class="token punctuation">.</span>Item<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token string">&quot;tel:400-618-4000&quot;</span> className<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>telephone<span class="token punctuation">}</span><span class="token operator">&gt;</span>
      电话预约
    <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>Flex<span class="token punctuation">.</span>Item<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>Flex<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h2 id="收藏房源-★★★"><a href="#收藏房源-★★★" class="header-anchor">#</a> 收藏房源（★★★）</h2> <ul><li>给收藏按钮绑定点击事件，创建方法handleFavorite作为事件处理程序</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function-variable function">handleFavorite</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>调用isAuth方法，判断是否登陆</li> <li>如果未登录，则使用Modal.alert 提示用户是否去登陆</li> <li>如果点击取消，则不做任何操作</li> <li>如果点击去登陆，就跳转到登陆页面，同时传递state(登陆后，再回到房源收藏页面)</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> isLogin <span class="token operator">=</span> <span class="token function">isAuth</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> history<span class="token punctuation">,</span> location<span class="token punctuation">,</span> match <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isLogin<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 未登录</span>
  <span class="token keyword">return</span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'提示'</span><span class="token punctuation">,</span> <span class="token string">'登录后才能收藏房源，是否去登录?'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'取消'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'去登录'</span><span class="token punctuation">,</span>
      <span class="token function-variable function">onPress</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> history<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/login'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">from</span><span class="token operator">:</span> location <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><ul><li>根据isFavorite判断，当前房源是否收藏</li> <li>如果未收藏，就调用添加收藏接口，添加收藏</li> <li>如果收藏了，就调用删除接口，删除收藏</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>isFavorite<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 已收藏，应该删除收藏</span>
  <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token constant">API</span><span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/user/favorites/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token comment">// console.log(res)</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">isFavorite</span><span class="token operator">:</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 提示用户取消收藏</span>
    Toast<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">'已取消收藏'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// token 超时</span>
    Toast<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">'登录超时，请重新登录'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token comment">// 未收藏，应该添加收藏</span>
  <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token constant">API</span><span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/user/favorites/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token comment">// console.log(res)</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 提示用户收藏成功</span>
    Toast<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">'已收藏'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">isFavorite</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// token 超时</span>
    Toast<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">'登录超时，请重新登录'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><ul><li>完整逻辑代码</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function-variable function">handleFavorite</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> isLogin <span class="token operator">=</span> <span class="token function">isAuth</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> history<span class="token punctuation">,</span> location<span class="token punctuation">,</span> match <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isLogin<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 未登录</span>
      <span class="token keyword">return</span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'提示'</span><span class="token punctuation">,</span> <span class="token string">'登录后才能收藏房源，是否去登录?'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'取消'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
          <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">'去登录'</span><span class="token punctuation">,</span>
          <span class="token function-variable function">onPress</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> history<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/login'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">from</span><span class="token operator">:</span> location <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 已登录</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> isFavorite <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state
    <span class="token keyword">const</span> <span class="token punctuation">{</span> id <span class="token punctuation">}</span> <span class="token operator">=</span> match<span class="token punctuation">.</span>params

    <span class="token keyword">if</span> <span class="token punctuation">(</span>isFavorite<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 已收藏，应该删除收藏</span>
      <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token constant">API</span><span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/user/favorites/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
      <span class="token comment">// console.log(res)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">isFavorite</span><span class="token operator">:</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 提示用户取消收藏</span>
        Toast<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">'已取消收藏'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// token 超时</span>
        Toast<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">'登录超时，请重新登录'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token comment">// 未收藏，应该添加收藏</span>
      <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token constant">API</span><span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/user/favorites/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
      <span class="token comment">// console.log(res)</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>res<span class="token punctuation">.</span>data<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 提示用户收藏成功</span>
        Toast<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">'已收藏'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          <span class="token literal-property property">isFavorite</span><span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token comment">// token 超时</span>
        Toast<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">'登录超时，请重新登录'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br></div></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://gitee.com/qarabala/my-blog/edit/master/docs/article/09-React/02-好租客/react好租客项目Day10-检测是否登&amp;退出&amp;axios拦截器&amp;鉴权路由&amp;收藏模块.md" target="_blank" rel="noopener noreferrer">在 Gitee 上编辑此页</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">最近更新时间:</span> <span class="time">5/5/2022, 5:10:51 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/my-blog/article/09-React/02-好租客/react好租客项目Day09-房屋详情&amp;路由配置&amp;登录功能&amp;formik表单校验.html" class="prev">
        房屋详情模块-准备工作
      </a></span> <span class="next"><a href="/my-blog/article/09-React/02-好租客/react好租客项目Day11-发布房源模块.html">
        房源发布模块
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/my-blog/assets/js/app.7c428a71.js" defer></script><script src="/my-blog/assets/js/3.bb9bf636.js" defer></script><script src="/my-blog/assets/js/123.e95c7eb0.js" defer></script>
  </body>
</html>
